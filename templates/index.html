<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Phishing URL Detector</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light text-center py-5">

    <div class="container">
        <h1 class="mb-4 text-primary">üîê Phishing URL Detector</h1>

        <!-- URL Check Form -->
        <form method="POST" class="mb-4">
            <div class="input-group input-group-lg w-75 mx-auto">
                <input type="text" name="url" class="form-control" placeholder="Enter a URL (e.g., https://example.com)" required>
                <button type="submit" class="btn btn-primary">Check</button>
            </div>
        </form>

        <!-- Result Message -->
        {% if result %}
        <div class="alert {{ 'alert-danger' if 'Phishing' in result else 'alert-success' }} w-50 mx-auto fs-5">
            {{ result }}
        </div>
        {% endif %}

        <!-- History Table -->
        {% if history %}
        <h2 class="mt-5 mb-3">üîÅ URL Check History</h2>
        <table class="table table-bordered table-striped w-75 mx-auto">
            <thead class="table-dark">
                <tr>
                    <th>URL</th>
                    <th>Result</th>
                </tr>
            </thead>
            <tbody>
                {% for item in history|reverse %}
                <tr>
                    <td>{{ item.url }}</td>
                    <td>{{ item.result }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Buttons: Clear + Download -->
        <div class="d-flex justify-content-center gap-3 mt-4">
            <form action="{{ url_for('clear_history') }}" method="post">
                <button type="submit" class="btn btn-danger">Clear History</button>
            </form>
            <form action="{{ url_for('download_history') }}" method="get">
                <button type="submit" class="btn btn-success">Download History</button>
            </form>
        </div>
        {% endif %}
    </div>

</body>
</html>
